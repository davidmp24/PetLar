{% extends 'index.html' %} {# Define que este template herda a estrutura de 'index.html' #}

{# Define o título da aba do navegador para esta página específica #}
{% block title %}Listar Adotantes - PetLar{% endblock %}

{# Define o título principal que aparecerá no cabeçalho da área de conteúdo #}
{% block page_title %}Adotantes Cadastrados{% endblock %}

{# Bloco principal onde o conteúdo específico desta página será inserido #}
{% block content %}
<div class="container mt-4"> {# Container principal com margem superior #}
    <div class="card p-4 shadow-lg bg-dark text-light"> {# Card com fundo escuro, sombra e preenchimento #}

        {# Cabeçalho da seção: Título e botão de adicionar novo #}
        <div class="d-flex justify-content-between align-items-center mb-3"> {# Layout flexível para alinhar itens #}
            <h3 class="text-light mb-0">Lista de Adotantes</h3> {# Título da lista, sem margem inferior #}
            {# Botão para ir para a página de cadastro de adotante #}
            <a href="{{ url_for('cadastrar_adotante') }}" class="btn btn-success">
                <i class="fas fa-plus me-1"></i> Cadastrar Novo Adotante {# Ícone de mais e texto #}
            </a>
        </div>

        {# Verifica se a lista de adotantes passada pela rota não está vazia #}
        {% if adotantes %}
            <div class="table-responsive"> {# Div para tornar a tabela rolável em telas pequenas #}
                {# Tabela com estilos Bootstrap: escura, listrada, hover e alinhamento vertical centralizado #}
                <table class="table table-dark table-striped table-hover align-middle">
                    <thead> {# Cabeçalho da tabela #}
                        <tr> {# Linha do cabeçalho #}
                            <th scope="col">ID</th> {# Coluna ID #}
                            <th scope="col">Foto</th> {# Coluna Foto Pessoal #}
                            <th scope="col">Nome Completo</th> {# Coluna Nome Completo #}
                            <th scope="col">CPF</th> {# Coluna CPF #}
                            <th scope="col">Telefone</th> {# Coluna Telefone #}
                            <th scope="col">Email</th> {# Coluna Email #}
                            <th scope="col">Animal Interesse</th> {# Coluna Animal de Interesse #}
                            <th scope="col" style="min-width: 150px;">Ações</th> {# Coluna Ações, com largura mínima #}
                        </tr>
                    </thead>
                    <tbody> {# Corpo da tabela #}
                        {# Loop para iterar sobre cada objeto 'adotante' na lista 'adotantes' #}
                        {% for adotante in adotantes %}
                            <tr> {# Linha para cada adotante #}
                                <th scope="row">{{ adotante.id }}</th> {# Célula ID (usando th para destaque) #}

                                {# Célula para exibir a foto pessoal ou placeholder #}
                                <td>
                                    {# Verifica se o adotante tem um nome de arquivo de foto pessoal salvo #}
                                    {% if adotante.foto_pessoal_filename %}
                                        {# Se tiver, exibe a imagem usando url_for para gerar o caminho estático #}
                                        <img src="{{ url_for('static', filename='uploads/adotantes/' + adotante.foto_pessoal_filename) }}"
                                             alt="Foto de {{ adotante.nome_completo }}" {# Texto alternativo descritivo #}
                                             class="img-thumbnail" {# Estilo Bootstrap para miniatura #}
                                             style="width: 50px; height: 50px; object-fit: cover;"> {# Estilo inline para tamanho e recorte #}
                                    {% else %}
                                        {# Se não tiver, exibe uma imagem placeholder #}
                                        <img src="{{ url_for('static', filename='images/placeholder_adotante.png') }}"
                                             alt="Sem Foto Pessoal" {# Texto alternativo para placeholder #}
                                             class="img-thumbnail" {# Estilo Bootstrap #}
                                             style="width: 50px; height: 50px; object-fit: cover;"> {# Estilo inline #}
                                        {# Garanta que o arquivo 'static/images/placeholder_adotante.png' exista #}
                                    {% endif %}
                                </td>

                                <td>{{ adotante.nome_completo }}</td> {# Célula Nome Completo #}
                                <td>{{ adotante.cpf }}</td> {# Célula CPF #}
                                <td>{{ adotante.telefone }}</td> {# Célula Telefone #}
                                <td>{{ adotante.email }}</td> {# Célula Email #}
                                <td>{{ adotante.animal_interesse }} ({{ adotante.tipo_animal_interesse }})</td> {# Célula Interesse #}

                                {# Célula contendo os botões de ação #}
                                <td>
                                    {# Div com flexbox para alinhar os botões e adicionar espaçamento (gap) #}
                                    <div class="d-flex flex-wrap gap-1">
                                        {# Botão/Link para ver os detalhes do adotante #}
                                        <a href="{{ url_for('detalhes_adotante', adotante_id=adotante.id) }}" class="btn btn-sm btn-info" title="Ver Detalhes">
                                            <i class="fas fa-eye"></i> {# Ícone de olho #}
                                        </a>
                                        {# Botão/Link para ir para o formulário de edição do adotante #}
                                        <a href="{{ url_for('editar_adotante_form', adotante_id=adotante.id) }}" class="btn btn-sm btn-warning" title="Editar">
                                            <i class="fas fa-edit"></i> {# Ícone de lápis #}
                                        </a>
                                        {# Formulário para enviar a requisição de exclusão (método POST) #}
                                        <form action="{{ url_for('excluir_adotante', adotante_id=adotante.id) }}" method="POST" style="display: inline;" onsubmit="return confirm('Tem certeza que deseja excluir {{ adotante.nome_completo }}?');">
                                            {# Botão de submit do formulário de exclusão #}
                                            <button type="submit" class="btn btn-sm btn-danger" title="Excluir">
                                                <i class="fas fa-trash"></i> {# Ícone de lixeira #}
                                            </button>
                                            {# Adicionar input CSRF aqui se estiver usando Flask-WTF/CSRFProtect #}
                                        </form>
                                    </div>
                                </td>
                            </tr>
                        {% endfor %} {# Fim do loop sobre os adotantes #}
                    </tbody> {# Fim do corpo da tabela #}
                </table> {# Fim da tabela #}
            </div> {# Fim da div table-responsive #}
        {% else %} {# Caso a lista 'adotantes' esteja vazia #}
            {# Exibe uma mensagem informativa #}
            <div class="alert alert-info text-center">
                Nenhum adotante cadastrado ainda.
            </div>
        {% endif %} {# Fim da condição 'if adotantes' #}
    </div> {# Fim da div card #}
</div> {# Fim da div container #}
{% endblock %} {# Fim do bloco 'content' #}